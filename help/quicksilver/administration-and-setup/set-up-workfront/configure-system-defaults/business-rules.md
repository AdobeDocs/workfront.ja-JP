---
user-type: administrator
product-area: system-administration
navigation-topic: business rules
title: ビジネス・ルールの作成と編集
description: ビジネス・ルールを使用すると、Workfrontオブジェクトに検証を適用し、特定の条件が満たされた場合にオブジェクトを作成、編集または削除できないようにすることができます。 ビジネスルールは、データの整合性を損なう可能性のあるアクションを防ぐことで、データ品質と運用効率の向上に役立ちます。
author: Lisa
feature: System Setup and Administration
role: Admin
exl-id: 780c996c-5cf1-42fe-898d-2cc208bbae7b
source-git-commit: d68c4fd39234d8d5131828e2a4642bd9af8ca7d5
workflow-type: tm+mt
source-wordcount: '1269'
ht-degree: 4%

---

# ビジネスルールを作成および編集

{{preview-fast-release-general}}

ビジネス・ルールを使用すると、Workfrontオブジェクトに検証を適用し、特定の条件が満たされた場合にオブジェクトを作成、編集または削除できないようにすることができます。 ビジネスルールは、データの整合性を損なう可能性のあるアクションを防ぐことで、データ品質と運用効率の向上に役立ちます。

1 つのビジネス・ルールは、1 つのオブジェクトにのみ割り当てることができます。 例えば、特定の条件下でプロジェクトを編集しないというビジネスルールを作成した場合、同じルールをタスクに適用することはできません。 タスクに対して同じ条件を持つ別のビジネス・ルールを作成する必要があります。

ユーザーがオブジェクトを操作する場合、アクセスレベルとオブジェクト共有は、ビジネスルールよりも優先されます。 例えば、ユーザーがプロジェクトの編集を許可しないアクセスレベルまたは権限を持っている場合、それらは、特定の条件下でプロジェクトの編集を許可するビジネスルールよりも優先されます。

複数のビジネス・ルールがオブジェクトに適用される場合、ルールはすべて従いますが、特定の順序では適用されません。 たとえば、2 つのビジネス・ルールがあるとします。 1 つは、2 月の費用の作成を制限します。 2 番目は、プロジェクトのステータスが「完了」の場合に、プロジェクトを編集できないようにします。 6 月に完了したプロジェクトにユーザーが費用を追加しようとすると、2 番目のルールがトリガーされたので、費用を追加できません。

ビジネスルールは、API とWorkfront インターフェイスを使用したオブジェクトの作成、編集、削除に適用されます。

>[!NOTE]
>
>ビジネスルールでは特定のアクションがブロックされるので、実稼動環境で有効にする前に、まずサンドボックスまたはプレビュー環境でビジネスルールを設定して、十分にテストする必要があります。

## アクセス要件

+++ 展開すると、この記事の機能のアクセス要件が表示されます。

この記事の手順を実行するには、以下を保有している必要があります。

<table style="table-layout:auto"> 
 <col> 
 <col> 
 <tbody> 
  <tr> 
   <td>Adobe Workfront プラン</td> 
   <td>Ultimate</td> 
  </tr> 
  <tr> 
   <td>Adobe Workfront プラン</td> 
   <td>標準</td> 
  </tr> 
  <tr> 
   <td>アクセスレベル設定</td> 
   <td>システム管理者</td> 
  </tr>  
 </tbody> 
</table>

この表の情報について詳しくは、[Workfront ドキュメントのアクセス要件](/help/quicksilver/administration-and-setup/add-users/access-levels-and-object-permissions/access-level-requirements-in-documentation.md)を参照してください。

+++

## ビジネス・ルールのシナリオ

ビジネス・ルールのフォーマットは、「定義した条件が満たされると、ユーザーはオブジェクトに対するアクションを実行できなくなり、メッセージが表示されます。」です。

ビジネス ルールのプロパティやその他の関数の構文は、カスタム フォームの計算フィールドの構文と同じです。 この構文について詳しくは、[ 計算フィールドのフォームデザイナーへの追加 ](/help/quicksilver/administration-and-setup/customize-workfront/create-manage-custom-forms/form-designer/design-a-form/add-a-calculated-field.md) を参照してください。

IF ステートメントについて詳しくは、[ 「IF」ステートメントの概要 ](/help/quicksilver/reports-and-dashboards/reports/calc-cstm-data-reports/if-statements-overview.md) および [ 計算カスタムフィールドの条件演算子 ](/help/quicksilver/reports-and-dashboards/reports/calc-cstm-data-reports/condition-operators-calculated-custom-expressions.md) を参照してください。

ユーザーベースのワイルドカードについて詳しくは、[ ユーザーベースのワイルドカードを使用してレポートを一般化する ](/help/quicksilver/reports-and-dashboards/reports/reporting-elements/use-user-based-wildcards-generalize-reports.md) を参照してください。

日付ベースのワイルドカードについて詳しくは、[ 日付ベースのワイルドカードを使用してレポートを一般化する ](/help/quicksilver/reports-and-dashboards/reports/reporting-elements/use-date-based-wildcards-generalize-reports.md) を参照してください。

API ワイルドカードは、ビジネス・ルールでも使用できます。 `$$ISAPI` を使用して、API でのみルールをトリガーします。 `!$$ISAPI` を使用して、ユーザーインターフェイスでのみルールを適用し、ユーザーが API を使用してルールをバイパスできるようにします。

* 例えば、このルールでは、API を使用して完了したプロジェクトをユーザーが編集することを禁止しています。 ワイルドカードを使用しない場合、ルールはユーザーインターフェイスと API の両方でアクションをブロックします。
  `IF({status} = "CPL" && $$ISAPI, "You cannot edit completed projects through the API.")`

`$$BEFORE_STATE` と `$$AFTER_STATE` のワイルドカードは、編集の前後でオブジェクトのフィールド値にアクセスするための式で使用されます。

* これらのワイルドカードは、両方とも編集トリガーで使用できます。 編集トリガーのデフォルトのステート（ステートが式に含まれていない場合）は `$$AFTER_STATE` です。
* オブジェクト作成トリガーでは、before ステートが存在しないので、`$$AFTER_STATE` のみが許可されます。
* 後のステートが存在しないので、オブジェクト `$$BEFORE_STATE` 除トリガーでは削除のみを許可します。

簡単なビジネス・ルールのシナリオには、次のものがあります。

* ユーザーが 2 月の最後の週に新しい費用を追加することはできません。 この式は次のように表すことができます。`IF(MONTH($$TODAY) = 2 && DAYOFMONTH($$TODAY) >= 22, "You cannot add new expenses during the last week of February.")`
* ユーザーが「完了」ステータスのプロジェクトのプロジェクト名を編集できない。 この式は次のように表すことができます。`IF({status} = "CPL" && {name} != $$BEFORE_STATE.{name}, "You cannot edit the project name.")`

ネストされた IF ステートメントを含むシナリオは次のとおりです。

ユーザーが、完了したプロジェクトを編集したり、3 月の予定完了日を持つプロジェクトを編集したりできない。 この式は次のように表すことができます。

```
IF(
    $$AFTER_STATE.{status}="CPL",
    "You cannot edit a completed project",
    IF(
        MONTH({plannedCompletionDate})=3,
        "You cannot edit a project with a planned completion date in March")
)
```

## 新規ビジネス・ルールの追加

{{step-1-to-setup}}

1. 左側のパネルで **ビジネスルール** をクリックします。
1. 「**新規ビジネス・ルール**」をクリックします。
1. ビジネス・ルールを割り当てるオブジェクト・タイプを選択し、「**続行**」をクリックします。

   ![ オブジェクトを選択 ](assets/object-for-business-rule2.png)

1. ビジネス ルールの **名前** を入力します。
1. **アクティブ** フィールドで、ルールを保存する際にアクティブにする必要があるかどうかを選択します。

   **いいえ** を選択した場合、ルールは非アクティブとして保存され、後でアクティブにすることができます。

1. ビジネス ルールの **0}トリガー} を選択します。**&#x200B;オプションは次のとおりです。

   * **オブジェクトの作成時：** このルールは、ユーザーがオブジェクトを作成しようとすると適用されます。
   * **オブジェクト編集時：** このルールは、ユーザーがオブジェクトを編集しようとした場合に適用されます。
   * **オブジェクト削除時：** このルールは、ユーザーがオブジェクトを削除しようとすると適用されます。

1. （オプション）ビジネス・ルールの **説明** と適用時の処理を入力します。
1. ビジネス・ルール・ダイアログの中央にある式エディタで式を作成します。

   ビジネス・ルールのフォーマットは、「定義した条件が満たされると、ユーザーはオブジェクトに対するアクションを実行できなくなり、メッセージが表示されます。」です。

   式領域では、作成するビジネス・ルールの一部が条件であり、条件が満たされるとWorkfrontに表示されるメッセージです。

   * 「オブジェクト」は、ビジネス・ルールの作成時に選択したオブジェクト・タイプです。 ダイアログの見出しに表示されます。
   * 「アクション」は、ルールに対して選択したトリガーです（オブジェクトの作成、編集、削除）。
   * オブジェクトとアクションは既に定義されているので、式には含めません。
   * カスタム・エラー・メッセージは、ビジネス・ルールをトリガーしたときに表示されます。 問題の原因と修正方法に関する明確な説明が必要です。

     <span class="preview"> エラーメッセージに静的 URL を含めることができます。この URL は、ルールの制約内でのアクションを変更する方法をユーザーに示す、ドキュメントまたはその他の役に立つページへのリンクです。</span>

     <span class="preview"> この例では、「詳細情報」が URL にリンクします。 `"You are not allowed to add a new project in November.[Learn more](http://url)"` URL はかっこで囲む必要がありますが、角括弧内のリンクテキストは必要ありません。 完全な URL を表示すると、クリック可能なリンクになります。</span>

   ![ ビジネス・ルールの追加ダイアログ ](assets/add-business-rule-dialog-no-ai-button.png)

   この例は、プロジェクトのビジネスルールです。 今月が 11 月の場合、ユーザーは新しいプロジェクトを作成することは許可されておらず、メッセージがこれを説明します。

   ビジネス・ルールのその他の例については、この記事の [ ビジネス・ルールのシナリオ ](#scenarios-for-business-rules) を参照してください。

1. （オプション）右側のパネルで式 **式** および **フィールド** を使用して、ルールの作成を支援します。

   式またはフィールドを検索して、使用可能な項目のリストを絞り込みます。

   使用可能なフィールドのリストは、ビジネス・ルールのオブジェクト・タイプに関連するフィールドに限定されます。

1. ビジネス・ルールの構築が完了したら、「**保存**」をクリックします。

>[!NOTE]
>
>ビジネス・ルールを追加したら、関連するオブジェクトを追加、編集または削除してテストし、ルールが正しく適用されていることを確認する必要があります。

## ビジネス ルールのアクティブ化

ビジネス・ルールが非アクティブの場合、ビジネス・ルールのリストの「アクティブ」フィールドに「False」と表示されます。 リスト表示では、ルールのステータスを更新できません。

ビジネス・ルールをアクティブ化するには、次の手順に従います。

1. ルールのリストからビジネス・ルールを選択し、「編集」アイコンをクリックします。
1. ビジネス・ルール・ダイアログで **アクティブ** について **「はい**」を選択します。
1. **保存**&#x200B;をクリックします。
